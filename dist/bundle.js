!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){t(1);const r={callbackFunction:e=>{console.log(e)}};(function(){const e=new WebSocket("wss://ws.blockchain.info/inv");return{startSocket:n=>{e.addEventListener("open",()=>{e.send(JSON.stringify({op:"unconfirmed_sub"}))}),e.onmessage=(e=>{const t=JSON.parse(e.data);n(t)})}}})().startSocket(r.callbackFunction)},function(e,n,t){(function(n){var t;e.exports=function e(n,r,o){function i(u,s){if(!r[u]){if(!n[u]){var f="function"==typeof t&&t;if(!s&&f)return t(u,!0);if(a)return a(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var d=r[u]={exports:{}};n[u][0].call(d.exports,function(e){var t=n[u][1][e];return i(t||e)},d,d.exports,e,n,r,o)}return r[u].exports}for(var a="function"==typeof t&&t,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(e,n,t){var r=e("ngraph.random"),o={lazyExtend:function(){return e("ngraph.merge").apply(this,arguments)},randomIterator:function(){return r.randomIterator.apply(r,arguments)},random:function(){return r.random.apply(r,arguments)},events:e("ngraph.events")};o.Graph={version:e("./version.js"),graph:e("ngraph.graph"),serializer:function(){return{loadFromJSON:e("ngraph.fromjson"),storeToJSON:e("ngraph.tojson")}},centrality:e("./Algorithms/centrality.js"),operations:e("./Algorithms/operations.js"),geom:function(){return{intersect:e("gintersect"),intersectRect:e("./Utils/intersectRect.js")}},webgl:e("./WebGL/webgl.js"),webglInputEvents:e("./WebGL/webglInputEvents.js"),generator:function(){return e("ngraph.generators")},Input:{domInputManager:e("./Input/domInputManager.js"),webglInputManager:e("./Input/webglInputManager.js")},Utils:{dragndrop:e("./Input/dragndrop.js"),findElementPosition:e("./Utils/findElementPosition.js"),timer:e("./Utils/timer.js"),getDimension:e("./Utils/getDimensions.js"),events:e("./Utils/backwardCompatibleEvents.js")},Layout:{forceDirected:e("ngraph.forcelayout"),constant:e("./Layout/constant.js")},View:{Texture:e("./WebGL/texture.js"),webglAtlas:e("./WebGL/webglAtlas.js"),webglImageNodeProgram:e("./WebGL/webglImageNodeProgram.js"),webglLinkProgram:e("./WebGL/webglLinkProgram.js"),webglNodeProgram:e("./WebGL/webglNodeProgram.js"),webglLine:e("./WebGL/webglLine.js"),webglSquare:e("./WebGL/webglSquare.js"),webglImage:e("./WebGL/webglImage.js"),webglGraphics:e("./View/webglGraphics.js"),_webglUtil:{parseColor:e("./WebGL/parseColor.js")},svgGraphics:e("./View/svgGraphics.js"),renderer:e("./View/renderer.js"),cssGraphics:function(){throw new Error("cssGraphics is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},svgNodeFactory:function(){throw new Error("svgNodeFactory is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},community:function(){throw new Error("community is deprecated. Please use vivagraph < 0.7 if you need it, or `https://github.com/anvaka/ngraph.slpa` module")}},Rect:e("./Utils/rect.js"),svg:e("simplesvg"),BrowserInfo:e("./Utils/browserInfo.js")},n.exports=o},{"./Algorithms/centrality.js":36,"./Algorithms/operations.js":37,"./Input/domInputManager.js":38,"./Input/dragndrop.js":39,"./Input/webglInputManager.js":40,"./Layout/constant.js":41,"./Utils/backwardCompatibleEvents.js":42,"./Utils/browserInfo.js":43,"./Utils/findElementPosition.js":45,"./Utils/getDimensions.js":46,"./Utils/intersectRect.js":47,"./Utils/rect.js":49,"./Utils/timer.js":50,"./View/renderer.js":52,"./View/svgGraphics.js":53,"./View/webglGraphics.js":54,"./WebGL/parseColor.js":55,"./WebGL/texture.js":56,"./WebGL/webgl.js":57,"./WebGL/webglAtlas.js":58,"./WebGL/webglImage.js":59,"./WebGL/webglImageNodeProgram.js":60,"./WebGL/webglInputEvents.js":61,"./WebGL/webglLine.js":62,"./WebGL/webglLinkProgram.js":63,"./WebGL/webglNodeProgram.js":64,"./WebGL/webglSquare.js":65,"./version.js":66,gintersect:3,"ngraph.events":9,"ngraph.forcelayout":11,"ngraph.fromjson":13,"ngraph.generators":14,"ngraph.graph":16,"ngraph.merge":17,"ngraph.random":30,"ngraph.tojson":31,simplesvg:32}],2:[function(e,n,t){o.removeEventListener=function(e,n,t,o){return(r=r||(document.addEventListener?{add:i,rm:a}:{add:u,rm:s})).rm(e,n,t,o)},o.addEventListener=o,n.exports=o;var r=null;function o(e,n,t,o){return(r=r||(document.addEventListener?{add:i,rm:a}:{add:u,rm:s})).add(e,n,t,o)}function i(e,n,t,r){e.addEventListener(n,t,r)}function a(e,n,t,r){e.removeEventListener(n,t,r)}function u(e,n,t,r){if(r)throw new Error("cannot useCapture in oldIE");e.attachEvent("on"+n,t)}function s(e,n,t,r){e.detachEvent("on"+n,t)}},{}],3:[function(e,n,t){n.exports=function(e,n,t,r,o,i,a,u){var s,f,c,d,l,p,v,h,g,m,y,x,b={x:0,y:0};return m=(s=r-n)*a+(c=e-t)*u+(l=t*n-e*r),0!==(g=s*o+c*i+l)&&0!==m&&g>=0==m>=4?null:(h=(f=u-i)*t+(d=o-a)*r+(p=a*i-o*u),0!==(v=f*e+d*n+p)&&0!==h&&v>=0==h>=0?null:0==(y=s*d-f*c)?null:(x=c*p-d*l,b.x=(x<0?x-0:x+0)/y,x=f*l-s*p,b.y=(x<0?x-0:x+0)/y,b))}},{}],4:[function(e,n,t){n.exports.degree=e("./src/degree.js"),n.exports.betweenness=e("./src/betweenness.js"),n.exports.closeness=e("./src/closeness.js"),n.exports.eccentricity=e("./src/eccentricity.js")},{"./src/betweenness.js":5,"./src/closeness.js":6,"./src/degree.js":7,"./src/eccentricity.js":8}],5:[function(e,n,t){n.exports=function(e,n){var t,r=[],o=[],i=Object.create(null),a=Object.create(null),u=Object.create(null),s=Object.create(null),f=Object.create(null);return e.forEachNode(function(e){f[e.id]=0}),e.forEachNode(function(d){(function(t){for(e.forEachNode(function(e){var n=e.id;i[n]=[],a[n]=-1,u[n]=0}),a[t]=0,u[t]=1,r.push(t);r.length;){var s=r.shift();o.push(s),e.forEachLinkedNode(s,f,n)}function f(e){!function(e){-1===a[e]&&(a[e]=a[s]+1,r.push(e)),a[e]===a[s]+1&&(u[e]+=u[s],i[e].push(s))}(e.id)}})(t=d.id),function(){for(e.forEachNode(c);o.length;){for(var n=o.pop(),r=(1+s[n])/u[n],a=i[n],d=0;d<a.length;++d){var l=a[d];s[l]+=u[l]*r}n!==t&&(f[n]+=s[n])}}()}),n||Object.keys(f).forEach(function(e){f[e]/=2}),f;function c(e){s[e.id]=0}}},{}],6:[function(e,n,t){n.exports=function(e,n){var t,r=[],o=Object.create(null),i=Object.create(null);return e.forEachNode(function(e){i[e.id]=0}),e.forEachNode(function(a){(function(t){for(e.forEachNode(function(e){var n=e.id;o[n]=-1}),o[t]=0,r.push(t);r.length;){var i=r.shift();e.forEachLinkedNode(i,a,n)}function a(e){var n=e.id;-1===o[n]&&(o[n]=o[i]+1,r.push(n))}})(t=a.id),function(){var e=Object.keys(o).map(function(e){return o[e]}).filter(function(e){return-1!==e}),n=e.length,r=e.reduce(function(e,n){return e+n});i[t]=r>0?(n-1)/r:0}()}),i}},{}],7:[function(e,n,t){function r(e,n){var t=0;if(!e)return t;for(var r=0;r<e.length;r+=1)t+=e[r].toId===n?1:0;return t}function o(e,n){var t=0;if(!e)return t;for(var r=0;r<e.length;r+=1)t+=e[r].fromId===n?1:0;return t}function i(e){return e?e.length:0}n.exports=function(e,n){var t,a=Object.create(null);if("both"===(n=(n||"both").toLowerCase())||"inout"===n)t=i;else if("in"===n)t=r;else{if("out"!==n)throw new Error("Expected centrality degree kind is: in, out or both");t=o}return e.forEachNode(function(n){var r=e.getLinks(n.id);a[n.id]=t(r,n.id)}),a}},{}],8:[function(e,n,t){n.exports=function(e,n){var t,r=[],o=Object.create(null),i=Object.create(null);return e.forEachNode(function(e){i[e.id]=0}),e.forEachNode(function(a){(function(t){for(e.forEachNode(function(e){var n=e.id;o[n]=-1}),o[t]=0,r.push(t);r.length;){var i=r.shift();e.forEachLinkedNode(i,a,n)}function a(e){var n=e.id;-1===o[n]&&(o[n]=o[i]+1,r.push(n))}})(t=a.id),function(){var e=0;Object.keys(o).forEach(function(n){var t=o[n];e<t&&(e=t)}),i[t]=e}()}),i}},{}],9:[function(e,n,t){n.exports=function(e){!function(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var n=["on","fire","off"],t=0;t<n.length;++t)if(e.hasOwnProperty(n[t]))throw new Error("Subject cannot be eventified, since it already has property '"+n[t]+"'")}(e);var n=function(e){var n=Object.create(null);return{on:function(t,r,o){if("function"!=typeof r)throw new Error("callback is expected to be a function");var i=n[t];return i||(i=n[t]=[]),i.push({callback:r,ctx:o}),e},off:function(t,r){var o=void 0===t;if(o)return n=Object.create(null),e;if(n[t]){var i="function"!=typeof r;if(i)delete n[t];else for(var a=n[t],u=0;u<a.length;++u)a[u].callback===r&&a.splice(u,1)}return e},fire:function(t){var r,o=n[t];if(!o)return e;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var i=0;i<o.length;++i){var a=o[i];a.callback.apply(a.ctx,r)}return e}}}(e);return e.on=n.on,e.off=n.off,e.fire=n.fire,e}},{}],10:[function(e,n,t){function r(e,n,t){if(e.hasOwnProperty(t)){if("function"==typeof n[t])return;n[t]=function(r){return void 0!==r?(e[t]=r,n):e[t]}}}n.exports=function(e,n,t){if("[object Array]"===Object.prototype.toString.call(t))for(var o=0;o<t.length;++o)r(e,n,t[o]);else for(var i in e)r(e,n,i)}},{}],11:[function(e,n,t){n.exports=function(n,t){if(!n)throw new Error("Graph structure cannot be undefined");var i=e("ngraph.physics.simulator")(t),a=function(e){var t=n.getLinks(e);return t?1+t.length/3:1};t&&"function"==typeof t.nodeMass&&(a=t.nodeMass);var u=Object.create(null),s={},f=0,c=i.settings.springTransform||o;f=0,n.forEachNode(function(e){v(e.id),f+=1}),n.forEachLink(g),n.on("changed",p);var d=!1,l={step:function(){if(0===f)return!0;var e=i.step();l.lastMove=e,l.fire("step");var n=e/f,t=n<=.01;return d!==t&&(d=t,function(e){l.fire("stable",e)}(t)),t},getNodePosition:function(e){return x(e).pos},setNodePosition:function(e){var n=x(e);n.setPosition.apply(n,Array.prototype.slice.call(arguments,1)),i.invalidateBBox()},getLinkPosition:function(e){var n=s[e];if(n)return{from:n.from.pos,to:n.to.pos}},getGraphRect:function(){return i.getBBox()},forEachBody:function(e){Object.keys(u).forEach(function(n){e(u[n],n)})},pinNode:function(e,n){var t=x(e.id);t.isPinned=!!n},isNodePinned:function(e){return x(e.id).isPinned},dispose:function(){n.off("changed",p),l.fire("disposed")},getBody:function(e){return u[e]},getSpring:function(e,t){var r;if(void 0===t)r="object"!=typeof e?e:e.id;else{var o=n.hasLink(e,t);if(!o)return;r=o.id}return s[r]},simulator:i,graph:n,lastMove:0};return r(l),l;function p(e){for(var t=0;t<e.length;++t){var r=e[t];"add"===r.changeType?(r.node&&v(r.node.id),r.link&&g(r.link)):"remove"===r.changeType&&(r.node&&h(r.node),r.link&&m(r.link))}f=n.getNodesCount()}function v(e){var t=u[e];if(!t){var r=n.getNode(e);if(!r)throw new Error("initBody() was called with unknown node id");var o=r.position;if(!o){var a=function(e){var n=[];if(!e.links)return n;for(var t=Math.min(e.links.length,2),r=0;r<t;++r){var o=e.links[r],i=o.fromId!==e.id?u[o.fromId]:u[o.toId];i&&i.pos&&n.push(i)}return n}(r);o=i.getBestNewBodyPosition(a)}(t=i.addBodyAt(o)).id=e,u[e]=t,y(e),function(e){return e&&(e.isPinned||e.data&&e.data.isPinned)}(r)&&(t.isPinned=!0)}}function h(e){var n=e.id,t=u[n];t&&(u[n]=null,delete u[n],i.removeBody(t))}function g(e){y(e.fromId),y(e.toId);var n=u[e.fromId],t=u[e.toId],r=i.addSpring(n,t,e.length);c(e,r),s[e.id]=r}function m(e){var t=s[e.id];if(t){var r=n.getNode(e.fromId),o=n.getNode(e.toId);r&&y(r.id),o&&y(o.id),delete s[e.id],i.removeSpring(t)}}function y(e){var n=u[e];if(n.mass=a(e),Number.isNaN(n.mass))throw new Error("Node mass should be a number")}function x(e){var n=u[e];return n||(v(e),n=u[e]),n}},n.exports.simulator=e("ngraph.physics.simulator");var r=e("ngraph.events");function o(){}},{"ngraph.events":12,"ngraph.physics.simulator":19}],12:[function(e,n,t){arguments[4][9][0].apply(t,arguments)},{dup:9}],13:[function(e,n,t){n.exports=function(e,n,t){var i;n=n||o,t=t||o,i="string"==typeof e?JSON.parse(e):e;var a,u=r();if(void 0===i.links||void 0===i.nodes)throw new Error("Cannot load graph without links and nodes");for(a=0;a<i.nodes.length;++a){var s=n(i.nodes[a]);if(!s.hasOwnProperty("id"))throw new Error("Graph node format is invalid: Node id is missing");u.addNode(s.id,s.data)}for(a=0;a<i.links.length;++a){var f=t(i.links[a]);if(!f.hasOwnProperty("fromId")||!f.hasOwnProperty("toId"))throw new Error("Graph link format is invalid. Both fromId and toId are required");u.addLink(f.fromId,f.toId,f.data)}return u};var r=e("ngraph.graph");function o(e){return e}},{"ngraph.graph":16}],14:[function(e,n,t){var r=e("ngraph.graph");function o(n){return{ladder:t,complete:function(e){if(!e||e<1)throw new Error("At least two nodes are expected for complete graph");var t,r,o=n();for(t=0;t<e;++t)for(r=t+1;r<e;++r)t!==r&&o.addLink(t,r);return o},completeBipartite:function(e,t){if(!e||!t||e<0||t<0)throw new Error("Graph dimensions are invalid. Number of nodes in each partition should be greater than 0");var r,o,i=n();for(r=0;r<e;++r)for(o=e;o<e+t;++o)i.addLink(r,o);return i},balancedBinTree:function(e){if(e<0)throw new Error("Invalid number of nodes in balanced tree");var t,r=n(),o=Math.pow(2,e);for(0===e&&r.addNode(1),t=1;t<o;++t){var i=t,a=2*i,u=2*i+1;r.addLink(i,a),r.addLink(i,u)}return r},path:function(e){if(!e||e<0)throw new Error("Invalid number of nodes");var t,r=n();for(r.addNode(0),t=1;t<e;++t)r.addLink(t-1,t);return r},circularLadder:function(e){if(!e||e<0)throw new Error("Invalid number of nodes");var n=t(e);return n.addLink(0,e-1),n.addLink(e,2*e-1),n},grid:function(e,t){if(e<1||t<1)throw new Error("Invalid number of nodes in grid graph");var r,o,i=n();if(1===e&&1===t)return i.addNode(0),i;for(r=0;r<e;++r)for(o=0;o<t;++o){var a=r+o*e;r>0&&i.addLink(a,r-1+o*e),o>0&&i.addLink(a,r+(o-1)*e)}return i},grid3:function(e,t,r){if(e<1||t<1||r<1)throw new Error("Invalid number of nodes in grid3 graph");var o,i,a,u=n();if(1===e&&1===t&&1===r)return u.addNode(0),u;for(a=0;a<r;++a)for(o=0;o<e;++o)for(i=0;i<t;++i){var s=a*e*t,f=o+i*e+s;o>0&&u.addLink(f,o-1+i*e+s),i>0&&u.addLink(f,o+(i-1)*e+s),a>0&&u.addLink(f,o+i*e+(a-1)*e*t)}return u},noLinks:function(e){if(e<0)throw new Error("Number of nodes should be >= 0");var t,r=n();for(t=0;t<e;++t)r.addNode(t);return r},wattsStrogatz:function(t,r,o,i){if(r>=t)throw new Error("Choose smaller `k`. It cannot be larger than number of nodes `n`");var a,u,s=e("ngraph.random").random(i||42),f=n();for(a=0;a<t;++a)f.addNode(a);for(var c=Math.floor(r/2+1),d=1;d<c;++d)for(a=0;a<t;++a)u=(d+a)%t,f.addLink(a,u);for(d=1;d<c;++d)for(a=0;a<t;++a)if(s.nextDouble()<o){var l=a;u=(d+a)%t;var p=s.next(t),v=p===l||f.hasLink(l,p);if(v&&f.getLinks(l).length===t-1)continue;for(;v;)p=s.next(t),v=p===l||f.hasLink(l,p);var h=f.hasLink(l,u);f.removeLink(h),f.addLink(l,p)}return f},cliqueCircle:function(e,t){if(e<1)throw new Error("Invalid number of cliqueCount in cliqueCircle");if(t<1)throw new Error("Invalid number of cliqueSize in cliqueCircle");for(var r=n(),o=0;o<e;++o)i(t,o*t),o>0&&r.addLink(o*t,o*t-1);return r.addLink(0,r.getNodesCount()-1),r;function i(e,n){for(var t=0;t<e;++t)r.addNode(t+n);for(var t=0;t<e;++t)for(var o=t+1;o<e;++o)r.addLink(t+n,o+n)}}};function t(e){if(!e||e<0)throw new Error("Invalid number of nodes");var t,r=n();for(t=0;t<e-1;++t)r.addLink(t,t+1),r.addLink(e+t,e+t+1),r.addLink(t,e+t);return r.addLink(e-1,2*e-1),r}}n.exports=o(r),n.exports.factory=o},{"ngraph.graph":16,"ngraph.random":15}],15:[function(e,n,t){function r(e){var n="number"==typeof e?e:+new Date;return new o(n)}function o(e){this.seed=e}function i(){var e=this.seed;return e=4294967295&(3042594569^(e=4251993797+(e=4294967295&(3550635116+(e=374761393+(e=4294967295&(3345072700^(e=e+2127912214+(e<<12)&4294967295)^e>>>19))+(e<<5)&4294967295)^e<<9))+(e<<3)&4294967295)^e>>>16),this.seed=e,(268435455&e)/268435456}n.exports=r,n.exports.random=r,n.exports.randomIterator=function(e,n){var t=n||r();if("function"!=typeof t.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(n){var r,o,i;for(r=e.length-1;r>0;--r)o=t.next(r+1),i=e[o],e[o]=e[r],e[r]=i,n(i);e.length&&n(e[0])},shuffle:function(){var n,r,o;for(n=e.length-1;n>0;--n)r=t.next(n+1),o=e[r],e[r]=e[n],e[n]=o;return e}}},o.prototype.next=function(e){return Math.floor(this.nextDouble()*e)},o.prototype.nextDouble=i,o.prototype.uniform=i,o.prototype.gaussian=function(){var e,n,t;do{n=2*this.nextDouble()-1,t=2*this.nextDouble()-1,e=n*n+t*t}while(e>=1||0===e);return n*Math.sqrt(-2*Math.log(e)/e)}},{}],16:[function(e,n,t){n.exports=function(e){"uniqueLinkId"in(e=e||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now own each graph\nis considered to be not a multigraph by default (each edge is unique)."),e.multigraph=e.uniqueLinkId),void 0===e.multigraph&&(e.multigraph=!1);var n="function"==typeof Object.create?Object.create(null):{},t=[],s={},f=0,c=0,d=Object.keys?A:I,l=e.multigraph?function(e,n,t){var r=u(e,n),o=s.hasOwnProperty(r);if(o||k(e,n)){o||(s[r]=0);var i="@"+ ++s[r];r=u(e+i,n+i)}return new a(e,n,t,r)}:function(e,n,t){var r=u(e,n);return new a(e,n,t,r)},p=[],v=P,h=P,g=P,m=P,y={addNode:w,addLink:function(e,n,r){g();var o=E(e)||w(e),a=E(n)||w(n),u=l(e,n,r);return t.push(u),i(o,u),e!==n&&i(a,u),v(u,"add"),m(),u},removeLink:N,removeNode:L,getNode:E,getNodesCount:function(){return f},getLinksCount:function(){return t.length},getLinks:function(e){var n=E(e);return n?n.links:null},forEachNode:d,forEachLinkedNode:function(e,t,r){var o=E(e);if(o&&o.links&&"function"==typeof t)return r?function(e,t,r){for(var o=0;o<e.length;++o){var i=e[o];if(i.fromId===t&&r(n[i.toId],i))return!0}}(o.links,e,t):function(e,t,r){for(var o=0;o<e.length;++o){var i=e[o],a=i.fromId===t?i.toId:i.fromId;if(r(n[a],i))return!0}}(o.links,e,t)},forEachLink:function(e){var n,r;if("function"==typeof e)for(n=0,r=t.length;n<r;++n)e(t[n])},beginUpdate:g,endUpdate:m,clear:function(){g(),d(function(e){L(e.id)}),m()},hasLink:k,hasNode:E,getLink:k};return r(y),function(){var e=y.on;y.on=function(){return y.beginUpdate=g=j,y.endUpdate=m=_,v=x,h=b,y.on=e,e.apply(y,arguments)}}(),y;function x(e,n){p.push({link:e,changeType:n})}function b(e,n){p.push({node:e,changeType:n})}function w(e,t){if(void 0===e)throw new Error("Invalid node identifier");g();var r=E(e);return r?(r.data=t,h(r,"update")):(r=new function(e,n){this.id=e,this.links=null,this.data=n}(e,t),f++,h(r,"add")),n[e]=r,m(),r}function E(e){return n[e]}function L(e){var t=E(e);if(!t)return!1;g();var r=t.links;if(r){t.links=null;for(var o=0;o<r.length;++o)N(r[o])}return delete n[e],f--,h(t,"remove"),m(),!0}function N(e){if(!e)return!1;var n=o(e,t);if(n<0)return!1;g(),t.splice(n,1);var r=E(e.fromId),i=E(e.toId);return r&&(n=o(e,r.links))>=0&&r.links.splice(n,1),i&&(n=o(e,i.links))>=0&&i.links.splice(n,1),v(e,"remove"),m(),!0}function k(e,n){var t,r=E(e);if(!r||!r.links)return null;for(t=0;t<r.links.length;++t){var o=r.links[t];if(o.fromId===e&&o.toId===n)return o}return null}function P(){}function j(){c+=1}function _(){0==(c-=1)&&p.length>0&&(y.fire("changed",p),p.length=0)}function A(e){if("function"==typeof e)for(var t=Object.keys(n),r=0;r<t.length;++r)if(e(n[t[r]]))return!0}function I(e){var t;if("function"==typeof e)for(t in n)if(e(n[t]))return!0}};var r=e("ngraph.events");function o(e,n){if(!n)return-1;if(n.indexOf)return n.indexOf(e);var t,r=n.length;for(t=0;t<r;t+=1)if(n[t]===e)return t;return-1}function i(e,n){e.links?e.links.push(n):e.links=[n]}function a(e,n,t,r){this.fromId=e,this.toId=n,this.data=t,this.id=r}function u(e,n){return e.toString()+"👉 "+n.toString()}},{"ngraph.events":9}],17:[function(e,n,t){n.exports=function e(n,t){var r;if(n||(n={}),t)for(r in t)if(t.hasOwnProperty(r)){var o=n.hasOwnProperty(r),i=typeof t[r],a=!o||typeof n[r]!==i;a?n[r]=t[r]:"object"===i&&(n[r]=e(n[r],t[r]))}return n}},{}],18:[function(e,n,t){function r(e,n){this.pos=new o(e,n),this.prevPos=new o(e,n),this.force=new o,this.velocity=new o,this.mass=1}function o(e,n){e&&"number"!=typeof e?(this.x="number"==typeof e.x?e.x:0,this.y="number"==typeof e.y?e.y:0):(this.x="number"==typeof e?e:0,this.y="number"==typeof n?n:0)}function i(e,n,t){this.pos=new a(e,n,t),this.prevPos=new a(e,n,t),this.force=new a,this.velocity=new a,this.mass=1}function a(e,n,t){e&&"number"!=typeof e?(this.x="number"==typeof e.x?e.x:0,this.y="number"==typeof e.y?e.y:0,this.z="number"==typeof e.z?e.z:0):(this.x="number"==typeof e?e:0,this.y="number"==typeof n?n:0,this.z="number"==typeof t?t:0)}n.exports={Body:r,Vector2d:o,Body3d:i,Vector3d:a},r.prototype.setPosition=function(e,n){this.prevPos.x=this.pos.x=e,this.prevPos.y=this.pos.y=n},o.prototype.reset=function(){this.x=this.y=0},i.prototype.setPosition=function(e,n,t){this.prevPos.x=this.pos.x=e,this.prevPos.y=this.pos.y=n,this.prevPos.z=this.pos.z=t},a.prototype.reset=function(){this.x=this.y=this.z=0}},{}],19:[function(e,n,t){n.exports=function(n){var t=e("./lib/spring"),r=e("ngraph.expose"),o=e("ngraph.merge"),i=e("ngraph.events"),a=(n=o(n,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20})).createQuadTree||e("ngraph.quadtreebh"),u=n.createBounds||e("./lib/bounds"),s=n.createDragForce||e("./lib/dragForce"),f=n.createSpringForce||e("./lib/springForce"),c=n.integrator||e("./lib/eulerIntegrator"),d=n.createBody||e("./lib/createBody"),l=[],p=[],v=a(n),h=u(l,n),g=f(n),m=s(n),y=!0,x={bodies:l,quadTree:v,springs:p,settings:n,step:function(){!function(){var e,n=l.length;if(n)for(v.insertBodies(l);n--;)(e=l[n]).isPinned||(e.force.reset(),v.updateBodyForce(e),m.update(e));for(n=p.length;n--;)g.update(p[n])}();var e=c(l,n.timeStep);return h.update(),e},addBody:function(e){if(!e)throw new Error("Body is required");return l.push(e),e},addBodyAt:function(e){if(!e)throw new Error("Body position is required");var n=d(e);return l.push(n),n},removeBody:function(e){if(e){var n=l.indexOf(e);if(!(n<0))return l.splice(n,1),0===l.length&&h.reset(),!0}},addSpring:function(e,n,r,o,i){if(!e||!n)throw new Error("Cannot add null spring to force simulator");"number"!=typeof r&&(r=-1);var a=new t(e,n,r,i>=0?i:-1,o);return p.push(a),a},getTotalMovement:function(){return 0},removeSpring:function(e){if(e){var n=p.indexOf(e);return n>-1?(p.splice(n,1),!0):void 0}},getBestNewBodyPosition:function(e){return h.getBestNewPosition(e)},getBBox:function(){return y&&(h.update(),y=!1),h.box},invalidateBBox:function(){y=!0},gravity:function(e){return void 0!==e?(n.gravity=e,v.options({gravity:e}),this):n.gravity},theta:function(e){return void 0!==e?(n.theta=e,v.options({theta:e}),this):n.theta}};return r(n,x),i(x),x}},{"./lib/bounds":20,"./lib/createBody":21,"./lib/dragForce":22,"./lib/eulerIntegrator":23,"./lib/spring":24,"./lib/springForce":25,"ngraph.events":9,"ngraph.expose":10,"ngraph.merge":17,"ngraph.quadtreebh":26}],20:[function(e,n,t){n.exports=function(n,t){var r=e("ngraph.random").random(42),o={x1:0,y1:0,x2:0,y2:0};return{box:o,update:function(){var e=n.length;if(0!==e){for(var t=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MIN_VALUE;e--;){var u=n[e];u.isPinned?(u.pos.x=u.prevPos.x,u.pos.y=u.prevPos.y):(u.prevPos.x=u.pos.x,u.prevPos.y=u.pos.y),u.pos.x<t&&(t=u.pos.x),u.pos.x>i&&(i=u.pos.x),u.pos.y<r&&(r=u.pos.y),u.pos.y>a&&(a=u.pos.y)}o.x1=t,o.x2=i,o.y1=r,o.y2=a}},reset:function(){o.x1=o.y1=0,o.x2=o.y2=0},getBestNewPosition:function(e){var n=o,i=0,a=0;if(e.length){for(var u=0;u<e.length;++u)i+=e[u].pos.x,a+=e[u].pos.y;i/=e.length,a/=e.length}else i=(n.x1+n.x2)/2,a=(n.y1+n.y2)/2;var s=t.springLength;return{x:i+r.next(s)-s/2,y:a+r.next(s)-s/2}}}}},{"ngraph.random":30}],21:[function(e,n,t){var r=e("ngraph.physics.primitives");n.exports=function(e){return new r.Body(e)}},{"ngraph.physics.primitives":18}],22:[function(e,n,t){n.exports=function(n){var t=e("ngraph.merge"),r=e("ngraph.expose");n=t(n,{dragCoeff:.02});var o={update:function(e){e.force.x-=n.dragCoeff*e.velocity.x,e.force.y-=n.dragCoeff*e.velocity.y}};return r(n,o,["dragCoeff"]),o}},{"ngraph.expose":10,"ngraph.merge":17}],23:[function(e,n,t){n.exports=function(e,n){var t,r=0,o=0,i=0,a=0,u=e.length;if(0===u)return 0;for(t=0;t<u;++t){var s=e[t],f=n/s.mass;s.velocity.x+=f*s.force.x,s.velocity.y+=f*s.force.y;var c=s.velocity.x,d=s.velocity.y,l=Math.sqrt(c*c+d*d);l>1&&(s.velocity.x=c/l,s.velocity.y=d/l),r=n*s.velocity.x,i=n*s.velocity.y,s.pos.x+=r,s.pos.y+=i,o+=Math.abs(r),a+=Math.abs(i)}return(o*o+a*a)/u}},{}],24:[function(e,n,t){n.exports=function(e,n,t,r,o){this.from=e,this.to=n,this.length=t,this.coeff=r,this.weight="number"==typeof o?o:1}},{}],25:[function(e,n,t){n.exports=function(n){var t=e("ngraph.merge"),r=e("ngraph.random").random(42),o=e("ngraph.expose");n=t(n,{springCoeff:2e-4,springLength:80});var i={update:function(e){var t=e.from,o=e.to,i=e.length<0?n.springLength:e.length,a=o.pos.x-t.pos.x,u=o.pos.y-t.pos.y,s=Math.sqrt(a*a+u*u);0===s&&(a=(r.nextDouble()-.5)/50,u=(r.nextDouble()-.5)/50,s=Math.sqrt(a*a+u*u));var f=s-i,c=(!e.coeff||e.coeff<0?n.springCoeff:e.coeff)*f/s*e.weight;t.force.x+=c*a,t.force.y+=c*u,o.force.x-=c*a,o.force.y-=c*u}};return o(n,i,["springCoeff","springLength"]),i}},{"ngraph.expose":10,"ngraph.merge":17,"ngraph.random":30}],26:[function(e,n,t){function r(e,n){return 0===n?e.quad0:1===n?e.quad1:2===n?e.quad2:3===n?e.quad3:null}function o(e,n,t){0===n?e.quad0=t:1===n?e.quad1=t:2===n?e.quad2=t:3===n&&(e.quad3=t)}n.exports=function(n){(n=n||{}).gravity="number"==typeof n.gravity?n.gravity:-1,n.theta="number"==typeof n.theta?n.theta:.8;var t=e("ngraph.random").random(1984),i=e("./node"),a=e("./insertStack"),u=e("./isSamePosition"),s=n.gravity,f=[],c=new a,d=n.theta,l=[],p=0,v=h();return{insertBodies:function(e){var n,t=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,i=Number.MIN_VALUE,a=e.length;for(n=a;n--;){var u=e[n].pos.x,s=e[n].pos.y;u<t&&(t=u),u>o&&(o=u),s<r&&(r=s),s>i&&(i=s)}var f=o-t,c=i-r;for(f>c?i=r+f:o=t+c,p=0,(v=h()).left=t,v.right=o,v.top=r,v.bottom=i,(n=a-1)>=0&&(v.body=e[n]);n--;)g(e[n])},getRoot:function(){return v},updateBodyForce:function(e){var n,r,o,i,a=f,u=0,c=0,l=1,p=0,h=1;for(a[0]=v;l;){var g=a[p],m=g.body;l-=1,p+=1;var y=m!==e;m&&y?(r=m.pos.x-e.pos.x,o=m.pos.y-e.pos.y,0===(i=Math.sqrt(r*r+o*o))&&(r=(t.nextDouble()-.5)/50,o=(t.nextDouble()-.5)/50,i=Math.sqrt(r*r+o*o)),n=s*m.mass*e.mass/(i*i*i),u+=n*r,c+=n*o):y&&(r=g.massX/g.mass-e.pos.x,o=g.massY/g.mass-e.pos.y,0===(i=Math.sqrt(r*r+o*o))&&(r=(t.nextDouble()-.5)/50,o=(t.nextDouble()-.5)/50,i=Math.sqrt(r*r+o*o)),(g.right-g.left)/i<d?(n=s*g.mass*e.mass/(i*i*i),u+=n*r,c+=n*o):(g.quad0&&(a[h]=g.quad0,l+=1,h+=1),g.quad1&&(a[h]=g.quad1,l+=1,h+=1),g.quad2&&(a[h]=g.quad2,l+=1,h+=1),g.quad3&&(a[h]=g.quad3,l+=1,h+=1)))}e.force.x+=u,e.force.y+=c},options:function(e){return e?("number"==typeof e.gravity&&(s=e.gravity),"number"==typeof e.theta&&(d=e.theta),this):{gravity:s,theta:d}}};function h(){var e=l[p];return e?(e.quad0=null,e.quad1=null,e.quad2=null,e.quad3=null,e.body=null,e.mass=e.massX=e.massY=0,e.left=e.right=e.top=e.bottom=0):(e=new i,l[p]=e),++p,e}function g(e){for(c.reset(),c.push(v,e);!c.isEmpty();){var n=c.pop(),i=n.node,a=n.body;if(i.body){var s=i.body;if(i.body=null,u(s.pos,a.pos)){var f=3;do{var d=t.nextDouble(),l=(i.right-i.left)*d,p=(i.bottom-i.top)*d;s.pos.x=i.left+l,s.pos.y=i.top+p,f-=1}while(f>0&&u(s.pos,a.pos));if(0===f&&u(s.pos,a.pos))return}c.push(i,s),c.push(i,a)}else{var g=a.pos.x,m=a.pos.y;i.mass=i.mass+a.mass,i.massX=i.massX+a.mass*g,i.massY=i.massY+a.mass*m;var y=0,x=i.left,b=(i.right+x)/2,w=i.top,E=(i.bottom+w)/2;g>b&&(y+=1,x=b,b=i.right),m>E&&(y+=2,w=E,E=i.bottom);var L=r(i,y);L?c.push(L,a):((L=h()).left=x,L.top=w,L.right=b,L.bottom=E,L.body=a,o(i,y,L))}}}}},{"./insertStack":27,"./isSamePosition":28,"./node":29,"ngraph.random":30}],27:[function(e,n,t){function r(){this.stack=[],this.popIdx=0}n.exports=r,r.prototype={isEmpty:function(){return 0===this.popIdx},push:function(e,n){var t=this.stack[this.popIdx];t?(t.node=e,t.body=n):this.stack[this.popIdx]=new function(e,n){this.node=e,this.body=n}(e,n),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},{}],28:[function(e,n,t){n.exports=function(e,n){var t=Math.abs(e.x-n.x),r=Math.abs(e.y-n.y);return t<1e-8&&r<1e-8}},{}],29:[function(e,n,t){n.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},{}],30:[function(e,n,t){function r(e){var n="number"==typeof e?e:+new Date,t=function(){return(268435455&(n=4294967295&(3042594569^(n=4251993797+(n=4294967295&(3550635116+(n=374761393+(n=4294967295&(3345072700^(n=n+2127912214+(n<<12)&4294967295)^n>>>19))+(n<<5)&4294967295)^n<<9))+(n<<3)&4294967295)^n>>>16)))/268435456};return{next:function(e){return Math.floor(t()*e)},nextDouble:function(){return t()}}}n.exports={random:r,randomIterator:function(e,n){var t=n||r();if("function"!=typeof t.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(n){var r,o,i;for(r=e.length-1;r>0;--r)o=t.next(r+1),i=e[o],e[o]=e[r],e[r]=i,n(i);e.length&&n(e[0])},shuffle:function(){var n,r,o;for(n=e.length-1;n>0;--n)r=t.next(n+1),o=e[r],e[r]=e[n],e[n]=o;return e}}}}},{}],31:[function(e,n,t){n.exports=function(e,n,t){var r={nodes:[],links:[]},o=n||function(e){var n={id:e.id};return void 0!==e.data&&(n.data=e.data),n},i=t||function(e){var n={fromId:e.fromId,toId:e.toId};return void 0!==e.data&&(n.data=e.data),n};return e.forEachNode(function(e){r.nodes.push(o(e))}),e.forEachLink(function(e){r.links.push(i(e))}),JSON.stringify(r)}},{}],32:[function(e,n,t){n.exports=u,u.compile=e("./lib/compile");var r=u.compileTemplate=e("./lib/compile_template"),o=e("add-event-listener"),i="http://www.w3.org/2000/svg",a="http://www.w3.org/1999/xlink";function u(e,n){var t=function(e){var n,t=e;if("string"==typeof e)t=window.document.createElementNS(i,e);else if(e.simplesvg)return e;return t.simplesvg=!0,t.attr=function(e,n){return 2===arguments.length?(null!==n?t.setAttributeNS(null,e,n):t.removeAttributeNS(null,e),t):t.getAttributeNS(null,e)},t.append=function(e){var n=u(e);return t.appendChild(n),n},t.link=function(e){return arguments.length?(t.setAttributeNS(a,"xlink:href",e),t):t.getAttributeNS(a,"xlink:href")},t.text=function(e){return void 0!==e?(t.textContent=e,t):t.textContent},t.on=function(e,n,r){return o.addEventListener(t,e,n,r),t},t.off=function(e,n,r){return o.removeEventListener(t,e,n,r),t},t.dataSource=function(e){return n||(n=r(t)),n.link(e),t},t}(e);if(void 0===n)return t;for(var s=Object.keys(n),f=0;f<s.length;++f){var c=s[f],d=n[c];"link"===c?t.link(d):t.attr(c,d)}return t}},{"./lib/compile":33,"./lib/compile_template":34,"add-event-listener":2}],33:[function(e,n,t){var r=e("./domparser.js"),o=e("../");n.exports=function(e){try{return e=function(e){if(e){var n=e.match(/^<\w+/);if(n){var t=n[0].length;return e.substr(0,t)+' xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" '+e.substr(t)}throw new Error("Cannot parse input text: invalid xml?")}}(e),o(r.parseFromString(e,"text/xml").documentElement)}catch(e){throw e}}},{"../":32,"./domparser.js":35}],34:[function(e,n,t){n.exports=function(e){var n=Object.create(null);return function e(n,t){var i=n.nodeType,a=1===i||3===i;if(a){var u;if(n.hasChildNodes()){var s=n.childNodes;for(u=0;u<s.length;++u)e(s[u],t)}if(3===i&&function(e,n){var t=e.nodeValue;if(t){var o=t.match(r);if(o){var i=o[1],a=(i.indexOf("."),n[i]);a?a.push(u):a=n[i]=[u]}}function u(n){e.nodeValue=n[i]}}(n,t),n.attributes){var f=n.attributes;for(u=0;u<f.length;++u)o(f[u],n,t)}}}(e,n),{link:function(e){function t(n){n(e)}Object.keys(n).forEach(function(e){n[e].forEach(t)})}}};var r=/{{(.+?)}}/;function o(e,n,t){var o=e.value;if(o){var i=o.match(r);if(i){var a=e.localName,u=i[1],s=u.indexOf(".")<0;if(!s)throw new Error("simplesvg currently does not support nested bindings");var f=t[u];f?f.push(c):f=t[u]=[c]}}function c(e){n.setAttributeNS(null,a,e[u])}}},{}],35:[function(e,n,t){function r(){throw new Error("DOMParser is not supported by this platform. Please open issue here https://github.com/anvaka/simplesvg")}n.exports="undefined"==typeof DOMParser?{parseFromString:r}:new DOMParser},{}],36:[function(e,n,t){var r=e("ngraph.centrality");function o(e){var n=r.betweenness(e);return a(n)}function i(e,n){var t=r.degree(e,n);return a(t)}function a(e){return Object.keys(e).sort(function(n,t){return e[t]-e[n]}).map(function(n){return{key:n,value:e[n]}})}n.exports=function(){return{betweennessCentrality:o,degreeCentrality:i}}},{"ngraph.centrality":4}],37:[function(e,n,t){n.exports=function(){return{density:function(e,n){var t=e.getNodesCount();return 0===t?NaN:n?e.getLinksCount()/(t*(t-1)):2*e.getLinksCount()/(t*(t-1))}}}},{}],38:[function(e,n,t){n.exports=function(e,n){var t={};return{bindDragNDrop:function(e,o){var i;if(o){var a=n.getNodeUI(e.id);i=r(a),"function"==typeof o.onStart&&i.onStart(o.onStart),"function"==typeof o.onDrag&&i.onDrag(o.onDrag),"function"==typeof o.onStop&&i.onStop(o.onStop),t[e.id]=i}else(i=t[e.id])&&(i.release(),delete t[e.id])}}};var r=e("./dragndrop.js")},{"./dragndrop.js":39}],39:[function(e,n,t){n.exports=function(e){var n,t,a,u,s,f,c,d=0,l=0,p=!1,v=0,h=function(e,n,r){t&&t(e,{x:n-d,y:r-l}),d=n,l=r},g=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},m=function(e){e.preventDefault&&e.preventDefault()},y=function(e){return g(e),!1},x=function(e){e=e||window.event,h(e,e.clientX,e.clientY)},b=function(e){if(e=e||window.event,p)return g(e),!1;var t=1===e.button&&null!==window.event||0===e.button;return t?(d=e.clientX,l=e.clientY,c=e.target||e.srcElement,n&&n(e,{x:d,y:l}),r.on("mousemove",x),r.on("mouseup",w),g(e),s=window.document.onselectstart,f=window.document.ondragstart,window.document.onselectstart=y,c.ondragstart=y,!1):void 0},w=function(e){e=e||window.event,r.off("mousemove",x),r.off("mouseup",w),window.document.onselectstart=s,c.ondragstart=f,c=null,a&&a(e)},E=function(n){if("function"==typeof u){(n=n||window.event).preventDefault&&n.preventDefault(),n.returnValue=!1;var t,r=function(e){var n=0,t=0;return(e=e||window.event).pageX||e.pageY?(n=e.pageX,t=e.pageY):(e.clientX||e.clientY)&&(n=e.clientX+window.document.body.scrollLeft+window.document.documentElement.scrollLeft,t=e.clientY+window.document.body.scrollTop+window.document.documentElement.scrollTop),[n,t]}(n),o=i(e),a={x:r[0]-o[0],y:r[1]-o[1]};t=n.wheelDelta?n.wheelDelta/360:n.detail/-9,u(n,t,a)}},L=function(n){!u&&n?"webkit"===o.browser?e.addEventListener("mousewheel",E,!1):e.addEventListener("DOMMouseScroll",E,!1):u&&!n&&("webkit"===o.browser?e.removeEventListener("mousewheel",E,!1):e.removeEventListener("DOMMouseScroll",E,!1)),u=n},N=function(e,n){return(e.clientX-n.clientX)*(e.clientX-n.clientX)+(e.clientY-n.clientY)*(e.clientY-n.clientY)},k=function(e){if(1===e.touches.length){g(e);var n=e.touches[0];h(e,n.clientX,n.clientY)}else if(2===e.touches.length){var t=N(e.touches[0],e.touches[1]),r=0;t<v?r=-1:t>v&&(r=1),u(e,r,{x:e.touches[0].clientX,y:e.touches[0].clientY}),v=t,g(e),m(e)}},P=function(e){p=!1,r.off("touchmove",k),r.off("touchend",P),r.off("touchcancel",P),c=null,a&&a(e)},j=function(e){if(1===e.touches.length)return function(e,t){g(e),m(e),d=t.clientX,l=t.clientY,c=e.target||e.srcElement,n&&n(e,{x:d,y:l}),p||(p=!0,r.on("touchmove",k),r.on("touchend",P),r.on("touchcancel",P))}(e,e.touches[0]);2===e.touches.length&&(g(e),m(e),v=N(e.touches[0],e.touches[1]))};return e.addEventListener("mousedown",b),e.addEventListener("touchstart",j),{onStart:function(e){return n=e,this},onDrag:function(e){return t=e,this},onStop:function(e){return a=e,this},onScroll:function(e){return L(e),this},release:function(){e.removeEventListener("mousedown",b),e.removeEventListener("touchstart",j),r.off("mousemove",x),r.off("mouseup",w),r.off("touchmove",k),r.off("touchend",P),r.off("touchcancel",P),L(null)}}};var r=e("../Utils/documentEvents.js"),o=e("../Utils/browserInfo.js"),i=e("../Utils/findElementPosition.js")},{"../Utils/browserInfo.js":43,"../Utils/documentEvents.js":44,"../Utils/findElementPosition.js":45}],40:[function(e,n,t){n.exports=function(e,n){var t=r(n),o=null,i={},a={x:0,y:0};return t.mouseDown(function(e,n){o=e,a.x=n.clientX,a.y=n.clientY,t.mouseCapture(o);var r=i[e.id];return r&&r.onStart&&r.onStart(n,a),!0}).mouseUp(function(e){t.releaseMouseCapture(o),o=null;var n=i[e.id];return n&&n.onStop&&n.onStop(),!0}).mouseMove(function(e,n){if(o){var t=i[o.id];return t&&t.onDrag&&t.onDrag(n,{x:n.clientX-a.x,y:n.clientY-a.y}),a.x=n.clientX,a.y=n.clientY,!0}}),{bindDragNDrop:function(e,n){i[e.id]=n,n||delete i[e.id]}}};var r=e("../WebGL/webglInputEvents.js")},{"../WebGL/webglInputEvents.js":61}],41:[function(e,n,t){n.exports=function(e,n){n=r(n,{maxX:1024,maxY:1024,seed:"Deterministic randomness made me do this"});var t=o(n.seed),a=new i(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),u={},s=function(e){return{x:t.next(n.maxX),y:t.next(n.maxY)}},f="function"==typeof Object.create?Object.create(null):{},c=function(e){f[e.id]=s(e),function(e,n){e.x<n.x1&&(n.x1=e.x),e.x>n.x2&&(n.x2=e.x),e.y<n.y1&&(n.y1=e.y),e.y>n.y2&&(n.y2=e.y)}(f[e.id],a)},d=function(){0!==e.getNodesCount()&&(a.x1=Number.MAX_VALUE,a.y1=Number.MAX_VALUE,a.x2=Number.MIN_VALUE,a.y2=Number.MIN_VALUE,e.forEachNode(c))},l=function(e){u[e.id]=e},p=function(e){for(var n=0;n<e.length;++n){var t=e[n];t.node&&("add"===t.changeType?c(t.node):delete f[t.node.id]),t.link&&("add"===t.changeType?l(t.link):delete u[t.link.id])}};return e.forEachNode(c),e.forEachLink(l),e.on("changed",p),{run:function(e){this.step()},step:function(){return d(),!0},getGraphRect:function(){return a},dispose:function(){e.off("change",p)},isNodePinned:function(e){return!0},pinNode:function(e,n){},getNodePosition:v,getLinkPosition:function(e){var n=u[e];return{from:v(n.fromId),to:v(n.toId)}},setNodePosition:function(e,n,t){var r=f[e];r&&(r.x=n,r.y=t)},placeNode:function(e){return"function"==typeof e?(s=e,d(),this):s(e)}};function v(e){return f[e]}};var r=e("ngraph.merge"),o=e("ngraph.random").random,i=e("../Utils/rect.js")},{"../Utils/rect.js":49,"ngraph.merge":17,"ngraph.random":30}],42:[function(e,n,t){var r=e("ngraph.events");n.exports=function(e){return console.log("This method is deprecated. Please use Viva.events() instead"),e?void 0!==e.on||void 0!==e.off||void 0!==e.fire?{extend:function(){return e},on:e.on,stop:e.off}:{extend:function(){var n=r(e);return n.addEventListener=n.on,n},on:e.on,stop:e.off}:e}},{"ngraph.events":9}],43:[function(e,n,t){n.exports=function(){if("undefined"==typeof window||!window.hasOwnProperty("navigator"))return{browser:"",version:"0"};var e=window.navigator.userAgent.toLowerCase(),n=/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(e)||[];return{browser:n[1]||"",version:n[2]||"0"}}()},{}],44:[function(e,n,t){var r=e("./nullEvents.js");function o(e,n){document.addEventListener(e,n)}function i(e,n){document.removeEventListener(e,n)}n.exports=void 0===typeof document?r:{on:o,off:i}},{"./nullEvents.js":48}],45:[function(e,n,t){n.exports=function(e){var n=0,t=0;if(e.offsetParent)do{n+=e.offsetLeft,t+=e.offsetTop}while(null!==(e=e.offsetParent));return[n,t]}},{}],46:[function(e,n,t){n.exports=function(e){if(!e)throw{message:"Cannot get dimensions of undefined container"};var n=e.clientWidth,t=e.clientHeight;return{left:0,top:0,width:n,height:t}}},{}],47:[function(e,n,t){var r=e("gintersect");n.exports=function(e,n,t,o,i,a,u,s){return r(e,n,e,o,i,a,u,s)||r(e,o,t,o,i,a,u,s)||r(t,o,t,n,i,a,u,s)||r(t,n,e,n,i,a,u,s)}},{gintersect:3}],48:[function(e,n,t){function r(){}n.exports={on:r,off:r,stop:r}},{}],49:[function(e,n,t){n.exports=function(e,n,t,r){this.x1=e||0,this.y1=n||0,this.x2=t||0,this.y2=r||0}},{}],50:[function(e,t,r){(function(e){function n(){}t.exports=function(){var t,r,o=0,i=["ms","moz","webkit","o"];for(r="undefined"!=typeof window?window:void 0!==e?e:{setTimeout:n,clearTimeout:n},t=0;t<i.length&&!r.requestAnimationFrame;++t){var a=i[t];r.requestAnimationFrame=r[a+"RequestAnimationFrame"],r.cancelAnimationFrame=r[a+"CancelAnimationFrame"]||r[a+"CancelRequestAnimationFrame"]}return r.requestAnimationFrame||(r.requestAnimationFrame=function(e){var n=(new Date).getTime(),t=Math.max(0,16-(n-o)),i=r.setTimeout(function(){e(n+t)},t);return o=n+t,i}),r.cancelAnimationFrame||(r.cancelAnimationFrame=function(e){r.clearTimeout(e)}),function(e){var n;return t(),{stop:o,restart:function(){n||t()}};function t(){n=r.requestAnimationFrame(t),e()||o()}function o(){r.cancelAnimationFrame(n),n=0}}}()}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],51:[function(e,n,t){var r=e("./nullEvents.js");function o(e,n){window.addEventListener(e,n)}function i(e,n){window.removeEventListener(e,n)}n.exports="undefined"==typeof window?r:{on:o,off:i}},{"./nullEvents.js":48}],52:[function(e,n,t){n.exports=function(e,n){var t,d,l,p=30,v=(n=n||{}).layout,h=n.graphics,g=n.container,m=void 0===n.interactive||n.interactive,y=!1,x=!0,b=!1,w=!1,E=!1,L={offsetX:0,offsetY:0,scale:1},N=r({});return{run:function(r){return y||(g=g||window.document.body,v=v||o(e,{springLength:80,springCoeff:2e-4}),h=h||i(e,{container:g}),n.hasOwnProperty("renderLinks")||(n.renderLinks=!0),n.prerender=n.prerender||0,t=(h.inputManager||u)(e,h),function(){if("number"==typeof n.prerender&&n.prerender>0)for(var e=0;e<n.prerender;e+=1)v.step()}(),h.init(g),e.forEachNode(I),n.renderLinks&&e.forEachLink(C),A(),a.on("resize",B),F(),k("drag")&&(l=c(g)).onDrag(function(e,n){h.translateRel(n.x,n.y),P(),N.fire("drag",n)}),k("scroll")&&(l||(l=c(g)),l.onScroll(function(e,n,t){z(n<0,t)})),e.forEachNode(M),G(),e.on("changed",O),y=!0),function(e){d||(d=s(void 0!==e?function(){return!((e-=1)<0)&&j()}:j,p))}(r),this},reset:function(){h.resetScale(),A(),L.scale=1},pause:function(){E=!0,d.stop()},resume:function(){E=!1,d.restart()},rerender:function(){return P(),this},zoomOut:function(){return z(!0)},zoomIn:function(){return z(!1)},getTransform:function(){return L},moveTo:function(e,n){h.graphCenterChanged(L.offsetX-e*L.scale,L.offsetY-n*L.scale),P()},getGraphics:function(){return h},getLayout:function(){return v},dispose:function(){y=!1,G(),F(),a.off("resize",B),N.off(),d.stop(),e.forEachLink(function(e){n.renderLinks&&S(e)}),e.forEachNode(function(e){D(e),T(e)}),v.dispose(),h.release(g)},on:function(e,n){return N.on(e,n),this},off:function(e,n){return N.off(e,n),this}};function k(e){return"string"==typeof m?m.indexOf(e)>=0:"boolean"!=typeof m||m}function P(){h.beginRender(),n.renderLinks&&h.renderLinks(),h.renderNodes(),h.endRender()}function j(){return b=v.step()&&!w,P(),!b}function _(){E||(b=!1,d.restart())}function A(){var e=v.getGraphRect(),n=f(g),t=(e.x2+e.x1)/2,r=(e.y2+e.y1)/2;L.offsetX=n.width/2-(t*L.scale-t),L.offsetY=n.height/2-(r*L.scale-r),h.graphCenterChanged(L.offsetX,L.offsetY),x=!1}function I(e){var n=v.getNodePosition(e.id);h.addNode(e,n)}function T(e){h.releaseNode(e)}function C(e){var n=v.getLinkPosition(e.id);h.addLink(e,n)}function S(e){h.releaseLink(e)}function M(e){if(k("node")){var n=!1;t.bindDragNDrop(e,{onStart:function(){n=v.isNodePinned(e),v.pinNode(e,!0),w=!0,_()},onDrag:function(n,t){var r=v.getNodePosition(e.id);v.setNodePosition(e.id,r.x+t.x/L.scale,r.y+t.y/L.scale),w=!0,P()},onStop:function(){v.pinNode(e,n),w=!1}})}}function D(e){t.bindDragNDrop(e,null)}function U(n){var t=n.node;"add"===n.changeType?(I(t),M(t),x&&A()):"remove"===n.changeType?(D(t),T(t),0===e.getNodesCount()&&(x=!0)):"update"===n.changeType&&(D(t),T(t),I(t),M(t))}function R(e){var t=e.link;if("add"===e.changeType)n.renderLinks&&C(t);else if("remove"===e.changeType)n.renderLinks&&S(t);else if("update"===e.changeType)throw"Update type is not implemented. TODO: Implement me!"}function O(e){var n,t;for(n=0;n<e.length;n+=1)(t=e[n]).node?U(t):t.link&&R(t);_()}function B(){A(),j()}function F(){l&&(l.release(),l=null)}function G(){e.off("changed",O)}function z(e,n){if(!n){var t=f(g);n={x:t.width/2,y:t.height/2}}var r=Math.pow(1.4,e?-.2:.2);return L.scale=h.scale(r,n),P(),N.fire("scale",L.scale),L.scale}};var r=e("ngraph.events"),o=e("ngraph.forcelayout"),i=e("./svgGraphics.js"),a=e("../Utils/windowEvents.js"),u=e("../Input/domInputManager.js"),s=e("../Utils/timer.js"),f=e("../Utils/getDimensions.js"),c=e("../Input/dragndrop.js")},{"../Input/domInputManager.js":38,"../Input/dragndrop.js":39,"../Utils/getDimensions.js":46,"../Utils/timer.js":50,"../Utils/windowEvents.js":51,"./svgGraphics.js":53,"ngraph.events":9,"ngraph.forcelayout":11}],53:[function(e,n,t){n.exports=function(){var e,n,t,a=0,u=0,s=1,f={},c={},d=function(e){return r("rect").attr("width",10).attr("height",10).attr("fill","#00a2e8")},l=function(e,n){e.attr("x",n.x-5).attr("y",n.y-5)},p=function(e){return r("line").attr("stroke","#999")},v=function(e,n,t){e.attr("x1",n.x).attr("y1",n.y).attr("x2",t.x).attr("y2",t.y)},h=function(e){e.fire("rescaled")},g={x:0,y:0},m={x:0,y:0},y={x:0,y:0},x=function(){if(e){var n="matrix("+s+", 0, 0,"+s+","+a+","+u+")";e.attr("transform",n)}};n=function(){var n=r("svg");return e=r("g").attr("buffered-rendering","dynamic"),n.appendChild(e),n}();var b={getNodeUI:function(e){return f[e]},getLinkUI:function(e){return c[e]},node:function(e){if("function"==typeof e)return d=e,this},link:function(e){if("function"==typeof e)return p=e,this},placeNode:function(e){return l=e,this},placeLink:function(e){return v=e,this},beginRender:function(){},endRender:function(){},graphCenterChanged:function(e,n){a=e,u=n,x()},inputManager:i,translateRel:function(t,r){var o=n.createSVGPoint(),i=e.getCTM(),a=n.createSVGPoint().matrixTransform(i.inverse());o.x=t,o.y=r,(o=o.matrixTransform(i.inverse())).x=(o.x-a.x)*i.a,o.y=(o.y-a.y)*i.d,i.e+=o.x,i.f+=o.y;var u="matrix("+i.a+", 0, 0,"+i.d+","+i.e+","+i.f+")";e.attr("transform",u)},scale:function(t,r){var o=n.createSVGPoint();o.x=r.x,o.y=r.y,o=o.matrixTransform(e.getCTM().inverse());var i=n.createSVGMatrix().translate(o.x,o.y).scale(t).translate(-o.x,-o.y),f=e.getCTM().multiply(i);s=f.a,a=f.e,u=f.f;var c="matrix("+f.a+", 0, 0,"+f.d+","+f.e+","+f.f+")";return e.attr("transform",c),h(this),s},resetScale:function(){return s=1,e.attr("transform","matrix(1, 0, 0, 1, 0, 0)"),h(this),this},init:function(e){e.appendChild(n),x(),"function"==typeof t&&t(n)},release:function(e){n&&e&&e.removeChild(n)},addLink:function(n,t){var r=p(n);if(r)return r.position=t,r.link=n,c[n.id]=r,e.childElementCount>0?e.insertBefore(r,e.firstChild):e.appendChild(r),r},releaseLink:function(n){var t=c[n.id];t&&(e.removeChild(t),delete c[n.id])},addNode:function(n,t){var r=d(n);if(r)return r.position=t,r.node=n,f[n.id]=r,e.appendChild(r),r},releaseNode:function(n){var t=f[n.id];t&&(e.removeChild(t),delete f[n.id])},renderNodes:function(){for(var e in f)if(f.hasOwnProperty(e)){var n=f[e];g.x=n.position.x,g.y=n.position.y,l(n,g,n.node)}},renderLinks:function(){for(var e in c)if(c.hasOwnProperty(e)){var n=c[e];m.x=n.position.from.x,m.y=n.position.from.y,y.x=n.position.to.x,y.y=n.position.to.y,v(n,m,y,n.link)}},getGraphicsRoot:function(e){return"function"==typeof e&&(n?e(n):t=e),n},getSvgRoot:function(){return n}};return o(b),b};var r=e("simplesvg"),o=e("ngraph.events"),i=e("../Input/domInputManager.js")},{"../Input/domInputManager.js":38,"ngraph.events":9,simplesvg:32}],54:[function(e,n,t){n.exports=function(e){e=f(e,{enableBlending:!0,preserveDrawingBuffer:!1,clearColor:!1,clearColorValue:{r:1,g:1,b:1,a:1}});var n,t,c,d,l,p,v,h,g=0,m=0,y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],x=[],b=[],w={},E={},L=o(),N=i(),k=function(e){return a()},P=function(e){return u(3014898687)},j=function(){L.updateTransform(y),N.updateTransform(y)},_=function(){y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},A=function(){n&&t&&(d=t.width=Math.max(n.offsetWidth,1),l=t.height=Math.max(n.offsetHeight,1),c&&c.viewport(0,0,d,l),L&&L.updateSize(d/2,l/2),N&&N.updateSize(d/2,l/2))};t=window.document.createElement("canvas");var I={getLinkUI:function(e){return E[e]},getNodeUI:function(e){return w[e]},node:function(e){if("function"==typeof e)return k=e,this},link:function(e){if("function"==typeof e)return P=e,this},placeNode:function(e){return p=e,this},placeLink:function(e){return v=e,this},inputManager:r,beginRender:function(){},endRender:function(){m>0&&L.render(),g>0&&N.render()},bringLinkToFront:function(e){var n,t,r=L.getFrontLinkId();L.bringToFront(e),r>e.id&&(n=e.id,t=b[r],b[r]=b[n],b[r].id=r,b[n]=t,b[n].id=n)},graphCenterChanged:function(e,n){y[12]=2*e/d-1,y[13]=1-2*n/l,j()},addLink:function(e,n){var t=m++,r=P(e);return r.id=t,r.pos=n,L.createLink(r),b[t]=r,E[e.id]=r,r},addNode:function(e,n){var t=g++,r=k(e);return r.id=t,r.position=n,r.node=e,N.createNode(r),x[t]=r,w[e.id]=r,r},translateRel:function(e,n){y[12]+=2*y[0]*e/d/y[0],y[13]-=2*y[5]*n/l/y[5],j()},scale:function(e,n){var t=2*n.x/d-1,r=1-2*n.y/l;return t-=y[12],r-=y[13],y[12]+=t*(1-e),y[13]+=r*(1-e),y[0]*=e,y[5]*=e,j(),function(e){e.fire("rescaled")}(this),y[0]},resetScale:function(){return _(),c&&(A(),j()),this},updateSize:A,init:function(r){var o={};if(e.preserveDrawingBuffer&&(o.preserveDrawingBuffer=!0),n=r,A(),_(),n.appendChild(t),!(c=t.getContext("experimental-webgl",o))){var i="Could not initialize WebGL. Seems like the browser doesn't support it.";throw window.alert(i),i}if(e.enableBlending&&(c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA),c.enable(c.BLEND)),e.clearColor){var a=e.clearColorValue;c.clearColor(a.r,a.g,a.b,a.a),this.beginRender=function(){c.clear(c.COLOR_BUFFER_BIT)}}L.load(c),L.updateSize(d/2,l/2),N.load(c),N.updateSize(d/2,l/2),j(),"function"==typeof h&&h(t)},release:function(e){t&&e&&e.removeChild(t)},isSupported:function(){var e=window.document.createElement("canvas"),n=e&&e.getContext&&e.getContext("experimental-webgl");return n},releaseLink:function(e){m>0&&(m-=1);var n=E[e.id];delete E[e.id],L.removeLink(n);var t=n.id;if(t<m){if(0===m||m===t)return;var r=b[m];b[t]=r,r.id=t}},releaseNode:function(e){g>0&&(g-=1);var n=w[e.id];delete w[e.id],N.removeNode(n);var t=n.id;if(t<g){if(0===g||g===t)return;var r=x[g];x[t]=r,r.id=t,N.replaceProperties(n,r)}},renderNodes:function(){for(var e={x:0,y:0},n=0;n<g;++n){var t=x[n];e.x=t.position.x,e.y=t.position.y,p&&p(t,e),N.position(t,e)}},renderLinks:function(){if(!this.omitLinksRendering)for(var e={x:0,y:0},n={x:0,y:0},t=0;t<m;++t){var r=b[t],o=r.pos.from;n.x=o.x,n.y=-o.y,o=r.pos.to,e.x=o.x,e.y=-o.y,v&&v(r,n,e),L.position(r,n,e)}},getGraphicsRoot:function(e){return"function"==typeof e&&(t?e(t):h=e),t},setNodeProgram:function(e){if(!c&&e)N=e;else if(e)throw"Not implemented. Cannot swap shader on the fly... Yet."},setLinkProgram:function(e){if(!c&&e)L=e;else if(e)throw"Not implemented. Cannot swap shader on the fly... Yet."},transformClientToGraphCoordinates:function(e){return e.x=2*e.x/d-1,e.y=1-2*e.y/l,e.x=(e.x-y[12])/y[0],e.y=(e.y-y[13])/y[5],e.x=e.x*(d/2),e.y=e.y*(-l/2),e},transformGraphToClientCoordinates:function(e){return e.x=e.x/(d/2),e.y=e.y/(-l/2),e.x=e.x*y[0]+y[12],e.y=e.y*y[5]+y[13],e.x=(e.x+1)*d/2,e.y=(1-e.y)*l/2,e},getNodeAtClientPos:function(e,n){if("function"!=typeof n)return null;this.transformClientToGraphCoordinates(e);for(var t=0;t<g;++t)if(n(x[t],e.x,e.y))return x[t].node;return null}};return s(I),I};var r=e("../Input/webglInputManager.js"),o=e("../WebGL/webglLinkProgram.js"),i=e("../WebGL/webglNodeProgram.js"),a=e("../WebGL/webglSquare.js"),u=e("../WebGL/webglLine.js"),s=e("ngraph.events"),f=e("ngraph.merge")},{"../Input/webglInputManager.js":40,"../WebGL/webglLine.js":62,"../WebGL/webglLinkProgram.js":63,"../WebGL/webglNodeProgram.js":64,"../WebGL/webglSquare.js":65,"ngraph.events":9,"ngraph.merge":17}],55:[function(e,n,t){n.exports=function(e){var n=10414335;if("string"==typeof e&&e)if(4===e.length&&(e=e.replace(/([^#])/g,"$1$1")),9===e.length)n=parseInt(e.substr(1),16);else{if(7!==e.length)throw'Color expected in hex format with preceding "#". E.g. #00ff00. Got value: '+e;n=parseInt(e.substr(1),16)<<8|255}else"number"==typeof e&&(n=e);return n}},{}],56:[function(e,n,t){n.exports=function(e){this.canvas=window.document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.isDirty=!1,this.canvas.width=this.canvas.height=e}},{}],57:[function(e,n,t){function r(e,n,t,r){for(var o=0;o<r;++o)e[n+o]=e[t+o]}function o(e,n,t,r){for(var o=0;o<r;++o){var i=e[n+o];e[n+o]=e[t+o],e[t+o]=i}}n.exports=function(e){return{createProgram:function(t,r){var o=e.createProgram(),i=n(t,e.VERTEX_SHADER),a=n(r,e.FRAGMENT_SHADER);if(e.attachShader(o,i),e.attachShader(o,a),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS)){var u=e.getShaderInfoLog(o);throw window.alert(u),u}return o},extendArray:function(e,n,t){if((n+1)*t>e.length){var r=new Float32Array(e.length*t*2);return r.set(e),r}return e},copyArrayPart:r,swapArrayPart:o,getLocations:function(n,t){for(var r={},o=0;o<t.length;++o){var i=t[o],a=-1;if("a"===i[0]&&"_"===i[1]){if(-1===(a=e.getAttribLocation(n,i)))throw new Error("Program doesn't have required attribute: "+i);r[i.slice(2)]=a}else{if("u"!==i[0]||"_"!==i[1])throw new Error("Couldn't figure out your intent. All uniforms should start with 'u_' prefix, and attributes with 'a_'");if(null===(a=e.getUniformLocation(n,i)))throw new Error("Program doesn't have required uniform: "+i);r[i.slice(2)]=a}}return r},context:e};function n(n,t){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(r);throw window.alert(o),o}return r}}},{}],58:[function(e,n,t){var r=e("./texture.js");n.exports=function(e){var n,t=Math.sqrt(e||1024)<<0,o=t,i=1,a={},u=0,s=[],f=[];if(!function(e){return 0==(e&e-1)}(e))throw"Tiles per texture should be power of two.";var c={isDirty:!1,clearDirty:function(){var e;for(c.isDirty=!1,e=0;e<s.length;++e)s[e].isDirty=!1},remove:function(e){var n=a[e];if(!n)return!1;if(delete a[e],(i-=1)===n.offset)return!0;var t=d(n.offset);return function(e,n){var t=s[e.textureNumber].canvas,r=s[n.textureNumber].ctx,i=n.col*o,a=n.row*o;r.drawImage(t,e.col*o,e.row*o,o,o,i,a,o,o),s[e.textureNumber].isDirty=!0,s[n.textureNumber].isDirty=!0}(d(i),t),a[f[i]].offset=n.offset,f[n.offset]=f[i],p(),!0},getTextures:function(){return s},getCoordinates:function(e){return a[e]},load:function(e,n){if(a.hasOwnProperty(e))n(a[e]);else{var u=new window.Image,c=i;i+=1,u.crossOrigin="anonymous",u.onload=function(){p(),function(e,n,i){var u=d(e),c={offset:e};u.textureNumber>=s.length&&function(){var e=new r(t*o);s.push(e)}();var l=s[u.textureNumber];l.ctx.drawImage(n,u.col*o,u.row*o,o,o),f[e]=n.src,a[n.src]=c,l.isDirty=!0,i(c)}(c,u,n)},u.src=e}}};return c;function d(n){var r=n/e<<0,o=n%e,i=o/t<<0,a=o%t;return{textureNumber:r,row:i,col:a}}function l(){c.isDirty=!0,u=0,n=null}function p(){n&&(window.clearTimeout(n),u+=1,n=null),u>10?l():n=window.setTimeout(l,400)}}},{"./texture.js":56}],59:[function(e,n,t){n.exports=function(e,n){return{_texture:0,_offset:0,size:"number"==typeof e?e:32,src:n}}},{}],60:[function(e,n,t){var r=e("./webglAtlas.js"),o=e("./webgl.js");n.exports=function(){var e,n,t,i,a,u,s,f,c,d,l=18,p=["precision mediump float;","varying vec4 color;","varying vec3 vTextureCoord;","uniform sampler2D u_sampler0;","uniform sampler2D u_sampler1;","uniform sampler2D u_sampler2;","uniform sampler2D u_sampler3;","void main(void) {","   if (vTextureCoord.z == 0.) {","     gl_FragColor = texture2D(u_sampler0, vTextureCoord.xy);","   } else if (vTextureCoord.z == 1.) {","     gl_FragColor = texture2D(u_sampler1, vTextureCoord.xy);","   } else if (vTextureCoord.z == 2.) {","     gl_FragColor = texture2D(u_sampler2, vTextureCoord.xy);","   } else if (vTextureCoord.z == 3.) {","     gl_FragColor = texture2D(u_sampler3, vTextureCoord.xy);","   } else { gl_FragColor = vec4(0, 1, 0, 1); }","}"].join("\n"),v=["attribute vec2 a_vertexPos;","attribute float a_customAttributes;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","uniform float u_tilesPerTexture;","varying vec3 vTextureCoord;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0, 1);","float corner = mod(a_customAttributes, 4.);","float tileIndex = mod(floor(a_customAttributes / 4.), u_tilesPerTexture);","float tilesPerRow = sqrt(u_tilesPerTexture);","float tileSize = 1./tilesPerRow;","float tileColumn = mod(tileIndex, tilesPerRow);","float tileRow = floor(tileIndex/tilesPerRow);","if(corner == 0.0) {","  vTextureCoord.xy = vec2(0, 1);","} else if(corner == 1.0) {","  vTextureCoord.xy = vec2(1, 1);","} else if(corner == 2.0) {","  vTextureCoord.xy = vec2(0, 0);","} else {","  vTextureCoord.xy = vec2(1, 0);","}","vTextureCoord *= tileSize;","vTextureCoord.x += tileColumn * tileSize;","vTextureCoord.y += tileRow * tileSize;","vTextureCoord.z = floor(floor(a_customAttributes / 4.)/u_tilesPerTexture);","}"].join("\n"),h=1024,g=0,m=new Float32Array(64);return{load:function(s){t=s,a=o(s),e=new r(h),n=a.createProgram(v,p),t.useProgram(n),u=a.getLocations(n,["a_vertexPos","a_customAttributes","u_screenSize","u_transform","u_sampler0","u_sampler1","u_sampler2","u_sampler3","u_tilesPerTexture"]),t.uniform1f(u.tilesPerTexture,h),t.enableVertexAttribArray(u.vertexPos),t.enableVertexAttribArray(u.customAttributes),i=t.createBuffer()},position:function(e,n){var t=e.id*l;m[t]=n.x-e.size,m[t+1]=n.y-e.size,m[t+2]=4*e._offset,m[t+3]=n.x+e.size,m[t+4]=n.y-e.size,m[t+5]=4*e._offset+1,m[t+6]=n.x-e.size,m[t+7]=n.y+e.size,m[t+8]=4*e._offset+2,m[t+9]=n.x-e.size,m[t+10]=n.y+e.size,m[t+11]=4*e._offset+2,m[t+12]=n.x+e.size,m[t+13]=n.y-e.size,m[t+14]=4*e._offset+1,m[t+15]=n.x+e.size,m[t+16]=n.y+e.size,m[t+17]=4*e._offset+3},createNode:function(n){m=a.extendArray(m,g,l),g+=1;var t=e.getCoordinates(n.src);t?n._offset=t.offset:(n._offset=0,e.load(n.src,function(e){n._offset=e.offset}))},removeNode:function(n){g>0&&(g-=1),n.id<g&&g>0&&(n.src&&e.remove(n.src),a.copyArrayPart(m,n.id*l,g*l,l))},replaceProperties:function(e,n){n._offset=e._offset},updateTransform:function(e){d=!0,c=e},updateSize:function(e,n){s=e,f=n,d=!0},render:function(){t.useProgram(n),t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,m,t.DYNAMIC_DRAW),d&&(d=!1,t.uniformMatrix4fv(u.transform,!1,c),t.uniform2f(u.screenSize,s,f)),t.vertexAttribPointer(u.vertexPos,2,t.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(u.customAttributes,1,t.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,8),function(){if(e.isDirty){var n,t=e.getTextures();for(n=0;n<t.length;++n)!t[n].isDirty&&t[n].nativeObject||y(t[n],n);e.clearDirty()}}(),t.drawArrays(t.TRIANGLES,0,6*g)}};function y(e,n){e.nativeObject&&t.deleteTexture(e.nativeObject);var r=t.createTexture();t.activeTexture(t["TEXTURE"+n]),t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.canvas),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.generateMipmap(t.TEXTURE_2D),t.uniform1i(u["sampler"+n],n),e.nativeObject=r}}},{"./webgl.js":57,"./webglAtlas.js":58}],61:[function(e,n,t){var r=e("../Utils/documentEvents.js");n.exports=function(e){if(e.webglInputEvents)return e.webglInputEvents;var n,t,o=null,i=[],a=[],u=[],s=[],f=[],c=[],d=[];!function(e){var l={x:0,y:0},p=null,y=1,x=+new Date,b=function(e){m(f,[p,e]),l.x=e.clientX,l.y=e.clientY},w=function(){r.off("mousemove",b),r.off("mouseup",w)},E=function(){t=e.getBoundingClientRect()};window.addEventListener("resize",E),E(),e.addEventListener("mousemove",function(e){if(!o){y++%7==0&&(E(),y=1);var n,r=!1;l.x=e.clientX-t.left,l.y=e.clientY-t.top,(n=v(l))&&p!==n?(p=n,r=r||m(i,[p])):null===n&&p!==n&&(r=r||m(a,[p]),p=null),r&&h(e)}}),e.addEventListener("mousedown",function(e){var o,i=!1;E(),l.x=e.clientX-t.left,l.y=e.clientY-t.top,(o=[v(l),e])[0]?(i=m(u,o),r.on("mousemove",b),r.on("mouseup",w),n=window.document.onselectstart,window.document.onselectstart=g,p=o[0]):p=null,i&&h(e)}),e.addEventListener("mouseup",function(e){var r,o=+new Date;l.x=e.clientX-t.left,l.y=e.clientY-t.top;var i=v(l),a=i===p;(r=[i||p,e])[0]&&(window.document.onselectstart=n,m(o-x<400&&a?d:c,r),x=o,m(s,r)&&h(e))})}(e.getGraphicsRoot());var l={mouseEnter:function(e){return"function"==typeof e&&i.push(e),l},mouseLeave:function(e){return"function"==typeof e&&a.push(e),l},mouseDown:function(e){return"function"==typeof e&&u.push(e),l},mouseUp:function(e){return"function"==typeof e&&s.push(e),l},mouseMove:function(e){return"function"==typeof e&&f.push(e),l},click:function(e){return"function"==typeof e&&c.push(e),l},dblClick:function(e){return"function"==typeof e&&d.push(e),l},mouseCapture:function(e){o=e},releaseMouseCapture:function(){o=null}};return e.webglInputEvents=l,l;function p(e,n,t){if(e&&e.size){var r=e.position,o=e.size;return r.x-o<n&&n<r.x+o&&r.y-o<t&&t<r.y+o}return!0}function v(n){return e.getNodeAtClientPos(n,p)}function h(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function g(e){return h(e),!1}function m(e,n){var t;for(t=0;t<e.length;t+=1)if(e[t].apply(void 0,n))return!0}}},{"../Utils/documentEvents.js":44}],62:[function(e,n,t){var r=e("./parseColor.js");n.exports=function(e){return{color:r(e)}}},{"./parseColor.js":55}],63:[function(e,n,t){var r=e("./webgl.js");n.exports=function(){var e,n,t,o,i,a,u,s,f,c,d=2*(2*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT),l=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join("\n"),p=["attribute vec2 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0.0, 1.0);","   color = a_color.abgr;","}"].join("\n"),v=0,h=new ArrayBuffer(16*d),g=new Float32Array(h),m=new Uint32Array(h);return{load:function(a){n=a,o=r(a),e=o.createProgram(p,l),n.useProgram(e),i=o.getLocations(e,["a_vertexPos","a_color","u_screenSize","u_transform"]),n.enableVertexAttribArray(i.vertexPos),n.enableVertexAttribArray(i.color),t=n.createBuffer()},position:function(e,n,t){var r=e.id,o=6*r;g[o]=n.x,g[o+1]=n.y,m[o+2]=e.color,g[o+3]=t.x,g[o+4]=t.y,m[o+5]=e.color},createLink:function(e){!function(){if((v+1)*d>h.byteLength){var e=new ArrayBuffer(2*h.byteLength),n=new Float32Array(e),t=new Uint32Array(e);t.set(m),g=n,m=t,h=e}}(),v+=1,a=e.id},removeLink:function(e){v>0&&(v-=1),e.id<v&&v>0&&o.copyArrayPart(m,6*e.id,6*v,6)},updateTransform:function(e){c=!0,f=e},updateSize:function(e,n){u=e,s=n,c=!0},render:function(){n.useProgram(e),n.bindBuffer(n.ARRAY_BUFFER,t),n.bufferData(n.ARRAY_BUFFER,h,n.DYNAMIC_DRAW),c&&(c=!1,n.uniformMatrix4fv(i.transform,!1,f),n.uniform2f(i.screenSize,u,s)),n.vertexAttribPointer(i.vertexPos,2,n.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),n.vertexAttribPointer(i.color,4,n.UNSIGNED_BYTE,!0,3*Float32Array.BYTES_PER_ELEMENT,8),n.drawArrays(n.LINES,0,2*v),a=v-1},bringToFront:function(e){a>e.id&&o.swapArrayPart(g,6*e.id,6*a,6),a>0&&(a-=1)},getFrontLinkId:function(){return a}}}},{"./webgl.js":57}],64:[function(e,n,t){var r=e("./webgl.js");n.exports=function(){var e,n,t,o,i,a,u,s,f,c=4,d=3*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT,l=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join("\n"),p=["attribute vec3 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos.xy/u_screenSize, 0, 1);","   gl_PointSize = a_vertexPos.z * u_transform[0][0];","   color = a_color.abgr;","}"].join("\n"),v=new ArrayBuffer(16*d),h=new Float32Array(v),g=new Uint32Array(v),m=0;return{load:function(a){n=a,i=r(a),e=i.createProgram(p,l),n.useProgram(e),o=i.getLocations(e,["a_vertexPos","a_color","u_screenSize","u_transform"]),n.enableVertexAttribArray(o.vertexPos),n.enableVertexAttribArray(o.color),t=n.createBuffer()},position:function(e,n){var t=e.id;h[t*c]=n.x,h[t*c+1]=-n.y,h[t*c+2]=e.size,g[t*c+3]=e.color},updateTransform:function(e){f=!0,s=e},updateSize:function(e,n){a=e,u=n,f=!0},removeNode:function(e){m>0&&(m-=1),e.id<m&&m>0&&i.copyArrayPart(g,e.id*c,m*c,c)},createNode:function(){(function(){if((m+1)*d>=v.byteLength){var e=new ArrayBuffer(2*v.byteLength),n=new Float32Array(e),t=new Uint32Array(e);t.set(g),h=n,g=t,v=e}})(),m+=1},replaceProperties:function(){},render:function(){n.useProgram(e),n.bindBuffer(n.ARRAY_BUFFER,t),n.bufferData(n.ARRAY_BUFFER,v,n.DYNAMIC_DRAW),f&&(f=!1,n.uniformMatrix4fv(o.transform,!1,s),n.uniform2f(o.screenSize,a,u)),n.vertexAttribPointer(o.vertexPos,3,n.FLOAT,!1,c*Float32Array.BYTES_PER_ELEMENT,0),n.vertexAttribPointer(o.color,4,n.UNSIGNED_BYTE,!0,c*Float32Array.BYTES_PER_ELEMENT,12),n.drawArrays(n.POINTS,0,m)}}}},{"./webgl.js":57}],65:[function(e,n,t){var r=e("./parseColor.js");n.exports=function(e,n){return{size:"number"==typeof e?e:10,color:r(n)}}},{"./parseColor.js":55}],66:[function(e,n,t){n.exports="0.8.1"},{}]},{},[1])(1)}).call(this,t(2))},function(e,n){var t;t=function(){return this}();try{t=t||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(t=window)}e.exports=t}]);
//# sourceMappingURL=bundle.js.map